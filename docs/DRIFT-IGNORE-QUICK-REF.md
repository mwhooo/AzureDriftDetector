# Quick Reference: Common Drift Ignore Patterns

This is a quick reference for the most commonly needed drift ignore patterns. For comprehensive documentation, see [DRIFT-IGNORE.md](DRIFT-IGNORE.md).

## Azure Platform Properties (Global)

Add these to `globalPatterns` to ignore Azure-managed properties across all resources:

```json
{
  "globalPatterns": [
    {
      "propertyPattern": "properties.provisioningState",
      "reason": "Azure deployment lifecycle property"
    },
    {
      "propertyPattern": "properties.createdAt",
      "reason": "Azure managed creation timestamp"
    },
    {
      "propertyPattern": "properties.updatedAt", 
      "reason": "Azure managed update timestamp"
    },
    {
      "propertyPattern": "systemData",
      "reason": "Azure system metadata"
    }
  ]
}
```

## Service Bus Basic Tier

Service Bus Basic tier retains premium properties that cause false drift:

```json
{
  "resourceType": "Microsoft.ServiceBus/namespaces/queues",
  "reason": "Premium properties retained in Basic tier",
  "ignoredProperties": [
    "properties.autoDeleteOnIdle",
    "properties.defaultMessageTimeToLive",
    "properties.duplicateDetectionHistoryTimeWindow",
    "properties.maxMessageSizeInKilobytes"
  ],
  "conditions": {
    "skuTier": "Basic"
  }
}
```

## Storage Accounts

Common Azure-managed storage properties:

```json
{
  "resourceType": "Microsoft.Storage/storageAccounts",
  "reason": "Azure managed endpoint properties",
  "ignoredProperties": [
    "properties.primaryEndpoints",
    "properties.secondaryEndpoints",
    "properties.statusOfPrimary",
    "properties.statusOfSecondary"
  ]
}
```

## Key Vault

Key Vault URI is generated by Azure:

```json
{
  "resourceType": "Microsoft.KeyVault/vaults",
  "reason": "Azure managed vault URI",
  "ignoredProperties": [
    "properties.vaultUri"
  ]
}
```

## App Service Plans

SKU-dependent properties:

```json
{
  "resourceType": "Microsoft.Web/serverfarms",
  "reason": "Basic tier doesn't support advanced features",
  "ignoredProperties": [
    "properties.perSiteScaling",
    "properties.reserved"
  ],
  "conditions": {
    "sku.tier": "Basic"
  }
}
```

## Virtual Networks

Azure-generated GUIDs and endpoints:

```json
{
  "resourceType": "Microsoft.Network/virtualNetworks",
  "reason": "Azure managed network properties", 
  "ignoredProperties": [
    "properties.resourceGuid",
    "properties.virtualNetworkPeerings"
  ]
}
```

## Quick Usage

1. Create `drift-ignore.json` in your project root:
```json
{
  "ignorePatterns": {
    "description": "Ignore configuration for Azure platform noise",
    "resources": [
      // Add resource-specific rules here
    ],
    "globalPatterns": [
      // Add global patterns here
    ]
  }
}
```

2. Run with ignore configuration:
```bash
dotnet run -- --bicep-file template.bicep --resource-group myRG --ignore-config drift-ignore.json
```

3. Monitor console output to see what's being ignored:
```
ðŸ”‡ Ignoring drift: Microsoft.ServiceBus/namespaces/queues/myqueue - properties.autoDeleteOnIdle
```

## Need More Help?

- **Full Documentation**: [DRIFT-IGNORE.md](DRIFT-IGNORE.md)
- **Troubleshooting**: [DRIFT-IGNORE.md#troubleshooting](DRIFT-IGNORE.md#troubleshooting)
- **Advanced Features**: [DRIFT-IGNORE.md#advanced-features](DRIFT-IGNORE.md#advanced-features)